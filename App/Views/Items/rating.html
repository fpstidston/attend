{% extends 'base.html' %}

{% block title %}Items{% endblock %}

{% block body %}

	<h1>Best Ratings</h1>

    <p>
    	<a class="btn btn-primary" href="/items/new">Add attendance</a>
	</p>
	<p>
    	<a class="btn btn-default" href="/items/index">Recent Events</a>
    	<a class="btn btn-default">Best Ratings</a>
    	<a class="btn btn-default" href="/items/titles">Regular Subjects</a>
    </p>

    {% for itemsByGroup in items %}
    <div class="list-group">
    	<div class="list-group-item">
    		{% set rating = itemsByGroup[0].rating - 1 %}
			{% for i in 0..itemsByGroup[0].rating %}
				<i class="fa fa-star"></i> 
			{% endfor %}
			<span class="badge">
					{{ stat["counts"][itemsByGroup[0].rating] }} <i class="fa fa-check-circle"></i>	       
			</span>
			<span class="badge">
					{{ stat["averages"][itemsByGroup[0].rating] }} <i class="fa fa-star"></i> average	       
			</span>
			<span class="badge">
					{{ stat["totals"][itemsByGroup[0].rating] }} <i class="fa fa-star"></i> total	       
			</span>
    	</div>

    	{% for item in itemsByGroup %}
    	<div class="list-group-item">
	        <div class="media">
	        	<div class="media-left">
	        		<i style="color:lightgreen" class="fa fa-check-circle"></i>
	        	</div>
	        	<div class="media-body">
	        		<h4 class="media-heading">{{ item.name }}</h4>
	        		<p>{{ item.review }}</p>
	        		<small>{{ item.date }}</small>
	        	</div>
	        </div>
	    </div>
    	{% endfor %}
	</div>
	{% endfor %}

{% endblock %}
