{% extends 'base.html' %}

{% block title %}Items{% endblock %}

{% block body %}

    <h1>Regular Subjects</h1>

    <p>
    	<a class="btn btn-primary" href="/items/new">Add attendance</a>
	</p>
	<p>
    	<a class="btn btn-default" href="/items/index">Recent Events</a>
    	<a class="btn btn-default" href="/items/rating">Best Ratings</a>
    	<a class="btn btn-default">Regular Subjects</a>
    </p>

    {% for itemsByGroup in items %}
    <div class="list-group">
    	<div class="list-group-item">
			<h4 class="media-heading" style="display:inline-block;">
				{{ itemsByGroup[0].name }}
			</h4>
				
				{% if stat["counts"][itemsByGroup[0].name] > 1 %}
				<span class="badge">
						{{ stat["counts"][itemsByGroup[0].name] }} <i class="fa fa-check-circle"></i>	       
				</span>
				<span class="badge">
						{{ stat["averages"][itemsByGroup[0].name] }} <i class="fa fa-star"></i> average	       
				</span>
				<span class="badge">
						{{ stat["totals"][itemsByGroup[0].name] }} <i class="fa fa-star"></i> total	       
				</span>
				{% endif %}
    	</div>

    	{% for item in itemsByGroup %}
    	<div class="list-group-item">
	        <div class="media">
	        	<div class="media-left">
	        		<i style="color:lightgreen" class="fa fa-check-circle"></i>
	        	</div>
	        	<div class="media-body">
	        		<p>
	        			{% set rating = item.rating - 1 %}
	        			{% for i in 0..item.rating %}
	        				<i class="fa fa-star"></i> 
	        			{% endfor %}
	        			{{ item.review }}
	        		</p>
	        		<small>{{ item.date }}</small>
	        	</div>
	        </div>
	    </div>
    	{% endfor %}
	</div>
	{% endfor %}

{% endblock %}
